# Optionally, select the top N customers
top_n = 10
df_top = df.head(top_n)

# Set the figure size
plt.figure(figsize=(12, 8))

# Create a horizontal bar chart
bars = plt.barh(df_top['customer_name'], df_top['total_revenue_gap'], color='skyblue')

# Add data labels to each bar
for bar in bars:
    width = bar.get_width()
    plt.text(width + 0.05, bar.get_y() + bar.get_height()/2,
             '{:.2f}'.format(width),
             va='center', fontsize=10)

# Add labels and title
plt.xlabel('Total Revenue Gap', fontsize=14)
plt.ylabel('Customer Name', fontsize=14)
plt.title('Top {} Customers by Total Revenue Gap'.format(top_n), fontsize=16)

# Invert the y-axis to have the highest values at the top
plt.gca().invert_yaxis()

# Adjust layout to prevent label cutoff
plt.tight_layout()

# Show the plot
plt.show()

